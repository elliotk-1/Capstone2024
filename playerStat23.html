<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Stat Website</title>
        <link rel="stylesheet" href="/styles.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,700;1,700&family=Noto+Sans+JP&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <!-- navigation bar -->
        <nav class="navbar">
            <div class="navbar__container">
                <a id="navbar__logo"> <img style="height:100px; width: 150px;"src="/images/wildcat logo.png"> </a>
                <div class="navbar__toggle" id="mobile-menu">
                    <span class="bar">
                    <span class="bar">
                    <span class="bar">
                </div>
                <ul class="navbar__menu">
                    <li class="navbar__item">
                        <a href="/home.html" class="navbar__links"> Home </a>
                    </li>
                    <li class="navbar__item">
                        <a href="/stat/allStat23.html" class="navbar__links"> All Stats </a>
                    </li>
                    <li class="navbar__item">
                        <a href="/playerStat/playerStat23.html" class="navbar__links"> Player Stats </a>
                    </li>
                    <li class="navbar__btn">
                        <a href="/userAdd.html" class="button"> Add </a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- title for the table, include year (and win record?) -->
        <div class="main__container--stat">
            <h1 class="main__title--stat">Player Statistics by Year</h1>
            <p>
                Use the 'Select A File' button to choose a year's statistics to view. Once the table 
                has been generated, use the search bar to find a player by their number, or, find rows 
                that contain a specific value.
            </p>
        </div>
        <br><br>

        <!-- display all stats in a table, have a couple different years to choose from 
            (dropdown menu) -> links to pages with other years? -->
        <div class="dropdown">
            <div class="search--bar"></div>
                <script src="/app.js"></script>
                <button onclick="select()" class="dropbtn">Select a Year</button>
                <div id="myDropdown"class="dropdown__content"> 
                    <a href="/playerStat/playerStat21.html">2020-2021</a>
                    <a href="/playerStat/playerStat22.html">2021-2022</a>
                    <a href="/playerStat/playerStat23.html">2022-2023</a>
                </div>

                <!-- on click, toggle hiding and showing the menu (dropdown year menu)-->
                <script>
                    function select() {
                    document.getElementById("myDropdown").classList.toggle("show");
                    console.log("select function used");
                    };
                </script>

                <p class="search">Search for stats value or by player number: </p>
                <p class="search"><input id="myInput" type="text" placeholder="Search..."></p>

            <!-- it filters as you type, doesn't work for decimals, might want that for shooting% etc. make separate table for the header row
            
            centralized CSV file
            append function
            fix search, dropdown to select header
            report by Sunday, monday deadline for everything-->

            <script>
                document.getElementById("myInput").addEventListener("keyup", function() {
                    var input, filter, table, tr, td, i, txtValue;
                    input = document.getElementById("myInput");
                    filter = input.value.toUpperCase();
                    table = document.querySelector("#table-data table");
                    tr = table.getElementsByTagName("tr");

                    // Loop through all table rows, hide those that don't match the search query
                    for (i = 0; i < tr.length; i++) {
                    td = tr[i].getElementsByTagName("td")[0]; // Change index to match the column you want to search
                    if (td) {
                        txtValue = td.textContent || td.innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                        } else {
                        tr[i].style.display = "none";
                        }
                    }
                    }
                });
            </script>

        </div>

        <!-- generate table -->
        <div class="main__container--table">
            <input type="file" id="file">
            <label for="file">Select A File</label>
            <!-- separate table for header -->
            <div class="table-header">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Player #</th>
                            <th>Games</th>
                            <th>Points</th>
                            <th>Goals</th>
                            <th>Assist</th>
                            <th>Shots</th>
                            <th>Shooting  %</th>
                            <th>Shots on Goal</th>
                            <th>Shots on Goal %</th>
                            <th>FP Goals</th>
                            <th>FP Shots</th>
                            <th>Ground Balls</th>
                            <th>Draw Controls</th>
                            <th>Turnovers</th>
                            <th>Caused Turnovers</th>
                            <th>Fouls</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <!-- table data from csv file -->
            <table id="table-data"></table>
            <script src="/script.js" type="text/javascript"></script>
            <!-- keep table header at all times-->
        </div>

            <!-- footer section -->
        <div class="footer__container">
            <div class="footer__links">
                <div class="footer__link--wrapper">
                    <div class="footer__link--items">
                        <h2>About</h2>
                        <a href="/about/theTeam.html">The Team</a>
                        <a href="/about/theCoaches.html">The Coaches</a>
                        <a href="/about/theProgram.html">The Program</a>
                    </div>
                    <div class="footer__link--items">
                        <h2> --- </h2>
                        <a href="https://wildcats.sunypoly.edu/sports/wlax/index">Website</a>
                        <a href="https://www.instagram.com/sunypolywlax/">Instagram</a>
                        <a href="/about/webDesigner.html">Website Designer</a>
                    </div>
                </div>
            </div>
        </div>

    <script src="app.js"></script>
    </body>
</html>